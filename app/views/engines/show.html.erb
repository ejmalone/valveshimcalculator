<p style="color: green"><%= notice %></p>

<%= render @engine %>

<div>
  <%= link_to "Edit this engine", edit_engine_path(@engine) %> |
  <%= link_to "Back to engines", engines_path %>
</div>

<div>
  <br>
  <%= button_to "Destroy this engine", @engine, method: :delete %>
</div>

<% if @engine.lacks_shims? %>
  <%= link_to "Add current shims", edit_all_engine_shims_path(@engine) %>
<% else %>
  <h2>Current shims</h2>
  <table>
    <% @engine.cylinders.each do |cylinder| %>
      <tr><td colspan="2"><strong>Cylinder <%= cylinder.cylinder_num %></strong></td></tr>
      <% cylinder.valves.each do |valve| %>
        <tr>
          <td><%= valve_form_label(valve) %>: <%= valve.shim.thickness %></td>
        </tr>
      <% end %>
    <% end %>
  </table>

  <div>
    <%= link_to "Begin valve adjustment", new_engine_valve_adjustment_path(@engine) %>
    <% if @latest_adjustment.present? %>
      |
      <%= link_to "Or continue the most recent from #{ @latest_adjustment.adjustment_date }", edit_valve_adjustment_path(@latest_adjustment) %>
    <% end %>
  </div>
<% end %>
